// Source code is decompiled from a .class file using FernFlower decompiler (from Intellij IDEA).
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.Insets;
import java.io.File;
import java.io.FileOutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.Date;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.HashMap;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JDialog;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTabbedPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.table.DefaultTableModel;

public class Main {
   static Connection conn;
   static int currentUserID;
   static String currentUserName;
   static JFrame mainFrame;

   public Main() {
   }

   public static void main(String[] var0) {
      try {
         UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
      } catch (Exception var2) {
      }

      SwingUtilities.invokeLater(() -> {
         showLogin();
      });
   }

   static Connection getConnection() throws SQLException {
      if (conn == null || conn.isClosed()) {
         String var0 = "jdbc:postgresql://localhost:5432/kutuphane";
         String var1 = "postgres";
         String var2 = "cool";
         conn = DriverManager.getConnection(var0, var1, var2);
      }

      return conn;
   }

   static void showLogin() {
      JFrame var0 = new JFrame("Kütüphane Giriş");
      var0.setDefaultCloseOperation(3);
      var0.setSize(350, 200);
      var0.setLocationRelativeTo((Component)null);
      JPanel var1 = new JPanel(new GridBagLayout());
      GridBagConstraints var2 = new GridBagConstraints();
      var2.insets = new Insets(5, 5, 5, 5);
      var2.gridx = 0;
      var2.gridy = 0;
      var1.add(new JLabel("Kullanıcı Adı:"), var2);
      var2.gridx = 1;
      JTextField var3 = new JTextField(15);
      var1.add(var3, var2);
      var2.gridx = 0;
      var2.gridy = 1;
      var1.add(new JLabel("Şifre:"), var2);
      var2.gridx = 1;
      JPasswordField var4 = new JPasswordField(15);
      var1.add(var4, var2);
      var2.gridx = 0;
      var2.gridy = 2;
      var2.gridwidth = 2;
      JButton var5 = new JButton("Giriş");
      var1.add(var5, var2);
      var5.addActionListener((var3x) -> {
         try {
            Connection var4x = getConnection();
            PreparedStatement var5 = var4x.prepareStatement("SELECT KullaniciID, AdSoyad FROM KULLANICI WHERE KullaniciAdi=? AND Sifre=?");
            var5.setString(1, var3.getText());
            var5.setString(2, new String(var4.getPassword()));
            ResultSet var6 = var5.executeQuery();
            if (var6.next()) {
               currentUserID = var6.getInt(1);
               currentUserName = var6.getString(2);
               var0.dispose();
               showDashboard();
            } else {
               JOptionPane.showMessageDialog(var0, "Hatalı kullanıcı adı veya şifre!");
            }

            var6.close();
            var5.close();
         } catch (SQLException var7) {
            JOptionPane.showMessageDialog(var0, "Veritabanı hatası: " + var7.getMessage());
         }

      });
      var0.add(var1);
      var0.setVisible(true);
   }

   static void showDashboard() {
      mainFrame = new JFrame("Kütüphane Yönetim Sistemi");
      mainFrame.setDefaultCloseOperation(3);
      mainFrame.setSize(800, 600);
      mainFrame.setLocationRelativeTo((Component)null);
      JPanel var0 = new JPanel(new GridLayout(4, 2, 20, 20));
      var0.setBorder(BorderFactory.createEmptyBorder(30, 30, 30, 30));
      JLabel var1 = new JLabel("Hoş geldiniz, " + currentUserName, 0);
      var1.setFont(new Font("Arial", 1, 18));
      String[] var2 = new String[]{"Üye Yönetimi", "Kitap Yönetimi", "Ödünç Ver", "Kitap Teslim Al", "Ceza Görüntüle", "Raporlar", "Dinamik Sorgu", "Çıkış"};
      String[] var3 = var2;
      int var4 = var2.length;

      for(int var5 = 0; var5 < var4; ++var5) {
         String var6 = var3[var5];
         JButton var7 = new JButton(var6);
         var7.setFont(new Font("Arial", 0, 14));
         var7.addActionListener((var1x) -> {
            switch (var6) {
               case "Üye Yönetimi":
                  showUyeYonetimi();
                  break;
               case "Kitap Yönetimi":
                  showKitapYonetimi();
                  break;
               case "Ödünç Ver":
                  showOduncVer();
                  break;
               case "Kitap Teslim Al":
                  showTeslimAl();
                  break;
               case "Ceza Görüntüle":
                  showCeza();
                  break;
               case "Raporlar":
                  showRaporlar();
                  break;
               case "Dinamik Sorgu":
                  showDinamikSorgu();
                  break;
               case "Çıkış":
                  mainFrame.dispose();
                  showLogin();
            }

         });
         var0.add(var7);
      }

      mainFrame.add(var1, "North");
      mainFrame.add(var0, "Center");
      mainFrame.setVisible(true);
   }

   static void showUyeYonetimi() {
      JDialog var0 = new JDialog(mainFrame, "Üye Yönetimi", true);
      var0.setSize(700, 500);
      var0.setLocationRelativeTo(mainFrame);
      DefaultTableModel var1 = new DefaultTableModel(new String[]{"ID", "Ad", "Soyad", "Telefon", "Email", "Borç"}, 0);
      JTable var2 = new JTable(var1);
      JScrollPane var3 = new JScrollPane(var2);
      JPanel var4 = new JPanel(new FlowLayout(0));
      JTextField var5 = new JTextField(15);
      JButton var6 = new JButton("Ara");
      var4.add(new JLabel("Arama:"));
      var4.add(var5);
      var4.add(var6);
      JPanel var7 = new JPanel(new GridLayout(2, 4, 5, 5));
      JTextField var8 = new JTextField();
      JTextField var9 = new JTextField();
      JTextField var10 = new JTextField();
      JTextField var11 = new JTextField();
      var7.add(new JLabel("Ad:"));
      var7.add(var8);
      var7.add(new JLabel("Soyad:"));
      var7.add(var9);
      var7.add(new JLabel("Telefon:"));
      var7.add(var10);
      var7.add(new JLabel("Email:"));
      var7.add(var11);
      JPanel var12 = new JPanel(new FlowLayout());
      JButton var13 = new JButton("Ekle");
      JButton var14 = new JButton("Güncelle");
      JButton var15 = new JButton("Sil");
      var12.add(var13);
      var12.add(var14);
      var12.add(var15);
      Runnable var16 = () -> {
         var1.setRowCount(0);

         try {
            String var3 = "SELECT * FROM UYE";
            String var4 = var5.getText().trim();
            if (!var4.isEmpty()) {
               var3 = var3 + " WHERE Ad ILIKE ? OR Soyad ILIKE ? OR Email ILIKE ?";
            }

            PreparedStatement var5x = getConnection().prepareStatement(var3);
            if (!var4.isEmpty()) {
               var5x.setString(1, "%" + var4 + "%");
               var5x.setString(2, "%" + var4 + "%");
               var5x.setString(3, "%" + var4 + "%");
            }

            ResultSet var6 = var5x.executeQuery();

            while(var6.next()) {
               var1.addRow(new Object[]{var6.getInt("UyeID"), var6.getString("Ad"), var6.getString("Soyad"), var6.getString("Telefon"), var6.getString("Email"), var6.getBigDecimal("ToplamBorc")});
            }

            var6.close();
            var5x.close();
         } catch (SQLException var7) {
            JOptionPane.showMessageDialog(var0, var7.getMessage());
         }

      };
      var16.run();
      var6.addActionListener((var1x) -> {
         var16.run();
      });
      var2.getSelectionModel().addListSelectionListener((var6x) -> {
         int var7 = var2.getSelectedRow();
         if (var7 >= 0) {
            var8.setText((String)var1.getValueAt(var7, 1));
            var9.setText((String)var1.getValueAt(var7, 2));
            var10.setText((String)var1.getValueAt(var7, 3));
            var11.setText((String)var1.getValueAt(var7, 4));
         }

      });
      var13.addActionListener((var6x) -> {
         try {
            PreparedStatement var7 = getConnection().prepareStatement("INSERT INTO UYE (Ad, Soyad, Telefon, Email) VALUES (?, ?, ?, ?)");
            var7.setString(1, var8.getText());
            var7.setString(2, var9.getText());
            var7.setString(3, var10.getText());
            var7.setString(4, var11.getText());
            var7.executeUpdate();
            var7.close();
            var16.run();
            JOptionPane.showMessageDialog(var0, "Üye eklendi.");
         } catch (SQLException var8x) {
            JOptionPane.showMessageDialog(var0, var8x.getMessage());
         }

      });
      var14.addActionListener((var8x) -> {
         int var9x = var2.getSelectedRow();
         if (var9x < 0) {
            JOptionPane.showMessageDialog(var0, "Bir üye seçin.");
         } else {
            try {
               PreparedStatement var10x = getConnection().prepareStatement("UPDATE UYE SET Ad=?, Soyad=?, Telefon=?, Email=? WHERE UyeID=?");
               var10x.setString(1, var8.getText());
               var10x.setString(2, var9.getText());
               var10x.setString(3, var10.getText());
               var10x.setString(4, var11.getText());
               var10x.setInt(5, (Integer)var1.getValueAt(var9x, 0));
               var10x.executeUpdate();
               var10x.close();
               var16.run();
               JOptionPane.showMessageDialog(var0, "Üye güncellendi.");
            } catch (SQLException var11x) {
               JOptionPane.showMessageDialog(var0, var11x.getMessage());
            }

         }
      });
      var15.addActionListener((var4x) -> {
         int var5 = var2.getSelectedRow();
         if (var5 < 0) {
            JOptionPane.showMessageDialog(var0, "Bir üye seçin.");
         } else {
            int var6 = (Integer)var1.getValueAt(var5, 0);

            try {
               PreparedStatement var7 = getConnection().prepareStatement("DELETE FROM UYE WHERE UyeID=?");
               var7.setInt(1, var6);
               var7.executeUpdate();
               var7.close();
               var16.run();
               JOptionPane.showMessageDialog(var0, "Üye silindi.");
            } catch (SQLException var8) {
               JOptionPane.showMessageDialog(var0, var8.getMessage());
            }

         }
      });
      JPanel var17 = new JPanel(new BorderLayout());
      var17.add(var7, "Center");
      var17.add(var12, "South");
      var0.add(var4, "North");
      var0.add(var3, "Center");
      var0.add(var17, "South");
      var0.setVisible(true);
   }

   static void showKitapYonetimi() {
      JDialog var0 = new JDialog(mainFrame, "Kitap Yönetimi", true);
      var0.setSize(800, 550);
      var0.setLocationRelativeTo(mainFrame);
      DefaultTableModel var1 = new DefaultTableModel(new String[]{"ID", "Kitap Adı", "Yazar", "Kategori", "Yayınevi", "Yıl", "Toplam", "Mevcut"}, 0);
      JTable var2 = new JTable(var1);
      JScrollPane var3 = new JScrollPane(var2);
      JPanel var4 = new JPanel(new FlowLayout(0));
      JTextField var5 = new JTextField(15);
      JButton var6 = new JButton("Ara");
      var4.add(new JLabel("Arama:"));
      var4.add(var5);
      var4.add(var6);
      JPanel var7 = new JPanel(new GridLayout(3, 4, 5, 5));
      JTextField var8 = new JTextField();
      JTextField var9 = new JTextField();
      JComboBox var10 = new JComboBox();
      JTextField var11 = new JTextField();
      JTextField var12 = new JTextField();
      JTextField var13 = new JTextField();
      var7.add(new JLabel("Kitap Adı:"));
      var7.add(var8);
      var7.add(new JLabel("Yazar:"));
      var7.add(var9);
      var7.add(new JLabel("Kategori:"));
      var7.add(var10);
      var7.add(new JLabel("Yayınevi:"));
      var7.add(var11);
      var7.add(new JLabel("Basım Yılı:"));
      var7.add(var12);
      var7.add(new JLabel("Adet:"));
      var7.add(var13);
      JPanel var14 = new JPanel(new FlowLayout());
      JButton var15 = new JButton("Ekle");
      JButton var16 = new JButton("Güncelle");
      JButton var17 = new JButton("Sil");
      var14.add(var15);
      var14.add(var16);
      var14.add(var17);
      HashMap var18 = new HashMap();

      try {
         ResultSet var19 = getConnection().createStatement().executeQuery("SELECT * FROM KATEGORI");

         while(var19.next()) {
            var10.addItem(var19.getString("KategoriAdi"));
            var18.put(var19.getString("KategoriAdi"), var19.getInt("KategoriID"));
         }

         var19.close();
      } catch (SQLException var21) {
      }

      Runnable var22 = () -> {
         var1.setRowCount(0);

         try {
            String var3 = "SELECT k.*, c.KategoriAdi FROM KITAP k LEFT JOIN KATEGORI c ON k.KategoriID=c.KategoriID";
            String var4 = var5.getText().trim();
            if (!var4.isEmpty()) {
               var3 = var3 + " WHERE k.KitapAdi ILIKE ? OR k.Yazar ILIKE ?";
            }

            PreparedStatement var5x = getConnection().prepareStatement(var3);
            if (!var4.isEmpty()) {
               var5x.setString(1, "%" + var4 + "%");
               var5x.setString(2, "%" + var4 + "%");
            }

            ResultSet var6 = var5x.executeQuery();

            while(var6.next()) {
               var1.addRow(new Object[]{var6.getInt("KitapID"), var6.getString("KitapAdi"), var6.getString("Yazar"), var6.getString("KategoriAdi"), var6.getString("Yayinevi"), var6.getInt("BasimYili"), var6.getInt("ToplamAdet"), var6.getInt("MevcutAdet")});
            }

            var6.close();
            var5x.close();
         } catch (SQLException var7) {
            JOptionPane.showMessageDialog(var0, var7.getMessage());
         }

      };
      var22.run();
      var6.addActionListener((var1x) -> {
         var22.run();
      });
      var2.getSelectionModel().addListSelectionListener((var8x) -> {
         int var9x = var2.getSelectedRow();
         if (var9x >= 0) {
            var8.setText((String)var1.getValueAt(var9x, 1));
            var9.setText((String)var1.getValueAt(var9x, 2));
            var10.setSelectedItem(var1.getValueAt(var9x, 3));
            var11.setText((String)var1.getValueAt(var9x, 4));
            var12.setText(String.valueOf(var1.getValueAt(var9x, 5)));
            var13.setText(String.valueOf(var1.getValueAt(var9x, 6)));
         }

      });
      var15.addActionListener((var9x) -> {
         try {
            int var10x = Integer.parseInt(var13.getText());
            int var11x = (Integer)var18.get((String)var10.getSelectedItem());
            PreparedStatement var12x = getConnection().prepareStatement("INSERT INTO KITAP (KitapAdi, Yazar, KategoriID, Yayinevi, BasimYili, ToplamAdet, MevcutAdet) VALUES (?, ?, ?, ?, ?, ?, ?)");
            var12x.setString(1, var8.getText());
            var12x.setString(2, var9.getText());
            var12x.setInt(3, var11x);
            var12x.setString(4, var11.getText());
            var12x.setInt(5, Integer.parseInt(var12.getText()));
            var12x.setInt(6, var10x);
            var12x.setInt(7, var10x);
            var12x.executeUpdate();
            var12x.close();
            var22.run();
            JOptionPane.showMessageDialog(var0, "Kitap eklendi.");
         } catch (Exception var13x) {
            JOptionPane.showMessageDialog(var0, var13x.getMessage());
         }

      });
      var16.addActionListener((var11x) -> {
         int var12x = var2.getSelectedRow();
         if (var12x < 0) {
            JOptionPane.showMessageDialog(var0, "Bir kitap seçin.");
         } else {
            try {
               int var13x = (Integer)var18.get((String)var10.getSelectedItem());
               PreparedStatement var14 = getConnection().prepareStatement("UPDATE KITAP SET KitapAdi=?, Yazar=?, KategoriID=?, Yayinevi=?, BasimYili=?, ToplamAdet=? WHERE KitapID=?");
               var14.setString(1, var8.getText());
               var14.setString(2, var9.getText());
               var14.setInt(3, var13x);
               var14.setString(4, var11.getText());
               var14.setInt(5, Integer.parseInt(var12.getText()));
               var14.setInt(6, Integer.parseInt(var13.getText()));
               var14.setInt(7, (Integer)var1.getValueAt(var12x, 0));
               var14.executeUpdate();
               var14.close();
               var22.run();
               JOptionPane.showMessageDialog(var0, "Kitap güncellendi.");
            } catch (Exception var15) {
               JOptionPane.showMessageDialog(var0, var15.getMessage());
            }

         }
      });
      var17.addActionListener((var4x) -> {
         int var5 = var2.getSelectedRow();
         if (var5 < 0) {
            JOptionPane.showMessageDialog(var0, "Bir kitap seçin.");
         } else {
            try {
               PreparedStatement var6 = getConnection().prepareStatement("DELETE FROM KITAP WHERE KitapID=?");
               var6.setInt(1, (Integer)var1.getValueAt(var5, 0));
               var6.executeUpdate();
               var6.close();
               var22.run();
               JOptionPane.showMessageDialog(var0, "Kitap silindi.");
            } catch (SQLException var7) {
               JOptionPane.showMessageDialog(var0, var7.getMessage());
            }

         }
      });
      JPanel var20 = new JPanel(new BorderLayout());
      var20.add(var7, "Center");
      var20.add(var14, "South");
      var0.add(var4, "North");
      var0.add(var3, "Center");
      var0.add(var20, "South");
      var0.setVisible(true);
   }

   static void showOduncVer() {
      JDialog var0 = new JDialog(mainFrame, "Ödünç Ver", true);
      var0.setSize(700, 500);
      var0.setLocationRelativeTo(mainFrame);
      JPanel var1 = new JPanel(new BorderLayout(10, 10));
      var1.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
      JPanel var2 = new JPanel(new BorderLayout());
      var2.setBorder(BorderFactory.createTitledBorder("Üye Seç"));
      DefaultTableModel var3 = new DefaultTableModel(new String[]{"ID", "Ad", "Soyad", "Email"}, 0);
      JTable var4 = new JTable(var3);
      var2.add(new JScrollPane(var4), "Center");
      JPanel var5 = new JPanel(new BorderLayout());
      var5.setBorder(BorderFactory.createTitledBorder("Kitap Seç"));
      DefaultTableModel var6 = new DefaultTableModel(new String[]{"ID", "Kitap Adı", "Yazar", "Mevcut"}, 0);
      JTable var7 = new JTable(var6);
      var5.add(new JScrollPane(var7), "Center");
      JButton var8 = new JButton("Ödünç Ver");

      try {
         ResultSet var9 = getConnection().createStatement().executeQuery("SELECT UyeID, Ad, Soyad, Email FROM UYE");

         while(var9.next()) {
            var3.addRow(new Object[]{var9.getInt(1), var9.getString(2), var9.getString(3), var9.getString(4)});
         }

         var9.close();
         var9 = getConnection().createStatement().executeQuery("SELECT KitapID, KitapAdi, Yazar, MevcutAdet FROM KITAP WHERE MevcutAdet > 0");

         while(var9.next()) {
            var6.addRow(new Object[]{var9.getInt(1), var9.getString(2), var9.getString(3), var9.getInt(4)});
         }

         var9.close();
      } catch (SQLException var10) {
      }

      var8.addActionListener((var5x) -> {
         int var6x = var4.getSelectedRow();
         int var7x = var7.getSelectedRow();
         if (var6x >= 0 && var7x >= 0) {
            int var8 = (Integer)var3.getValueAt(var6x, 0);
            int var9 = (Integer)var6.getValueAt(var7x, 0);

            try {
               PreparedStatement var10 = getConnection().prepareStatement("SELECT sp_YeniOduncVer(?, ?, ?)");
               var10.setInt(1, var8);
               var10.setInt(2, var9);
               var10.setInt(3, currentUserID);
               ResultSet var11 = var10.executeQuery();
               if (var11.next()) {
                  String var12 = var11.getString(1);
                  JOptionPane.showMessageDialog(var0, var12);
                  if (var12.startsWith("BASARILI")) {
                     var6.setRowCount(0);
                     ResultSet var13 = getConnection().createStatement().executeQuery("SELECT KitapID, KitapAdi, Yazar, MevcutAdet FROM KITAP WHERE MevcutAdet > 0");

                     while(var13.next()) {
                        var6.addRow(new Object[]{var13.getInt(1), var13.getString(2), var13.getString(3), var13.getInt(4)});
                     }

                     var13.close();
                  }
               }

               var11.close();
               var10.close();
            } catch (SQLException var14) {
               JOptionPane.showMessageDialog(var0, var14.getMessage());
            }

         } else {
            JOptionPane.showMessageDialog(var0, "Üye ve kitap seçin.");
         }
      });
      JSplitPane var11 = new JSplitPane(1, var2, var5);
      var11.setDividerLocation(300);
      var1.add(var11, "Center");
      var1.add(var8, "South");
      var0.add(var1);
      var0.setVisible(true);
   }

   static void showTeslimAl() {
      JDialog var0 = new JDialog(mainFrame, "Kitap Teslim Al", true);
      var0.setSize(750, 450);
      var0.setLocationRelativeTo(mainFrame);
      DefaultTableModel var1 = new DefaultTableModel(new String[]{"ÖdünçID", "Üye", "Kitap", "Ödünç Tarihi", "Son Teslim"}, 0);
      JTable var2 = new JTable(var1);
      JScrollPane var3 = new JScrollPane(var2);
      JButton var4 = new JButton("Teslim Al");
      Runnable var5 = () -> {
         var1.setRowCount(0);

         try {
            String var2 = "SELECT o.OduncID, u.Ad || ' ' || u.Soyad as Uye, k.KitapAdi, o.OduncTarihi, o.SonTeslimTarihi FROM ODUNC o JOIN UYE u ON o.UyeID=u.UyeID JOIN KITAP k ON o.KitapID=k.KitapID WHERE o.TeslimTarihi IS NULL";
            ResultSet var3 = getConnection().createStatement().executeQuery(var2);

            while(var3.next()) {
               var1.addRow(new Object[]{var3.getInt(1), var3.getString(2), var3.getString(3), var3.getDate(4), var3.getDate(5)});
            }

            var3.close();
         } catch (SQLException var4) {
            JOptionPane.showMessageDialog(var0, var4.getMessage());
         }

      };
      var5.run();
      var4.addActionListener((var4x) -> {
         int var5x = var2.getSelectedRow();
         if (var5x < 0) {
            JOptionPane.showMessageDialog(var0, "Bir kayıt seçin.");
         } else {
            int var6 = (Integer)var1.getValueAt(var5x, 0);

            try {
               PreparedStatement var7 = getConnection().prepareStatement("SELECT sp_KitapTeslimAl(?, CURRENT_DATE)");
               var7.setInt(1, var6);
               ResultSet var8 = var7.executeQuery();
               if (var8.next()) {
                  JOptionPane.showMessageDialog(var0, var8.getString(1));
               }

               var8.close();
               var7.close();
               var5.run();
            } catch (SQLException var9) {
               JOptionPane.showMessageDialog(var0, var9.getMessage());
            }

         }
      });
      var0.add(var3, "Center");
      var0.add(var4, "South");
      var0.setVisible(true);
   }

   static void showCeza() {
      JDialog var0 = new JDialog(mainFrame, "Ceza Görüntüle", true);
      var0.setSize(700, 450);
      var0.setLocationRelativeTo(mainFrame);
      JPanel var1 = new JPanel(new FlowLayout(0));
      JComboBox var2 = new JComboBox();
      var2.addItem("Tüm Üyeler");
      HashMap var3 = new HashMap();

      try {
         ResultSet var4 = getConnection().createStatement().executeQuery("SELECT UyeID, Ad || ' ' || Soyad as AdSoyad FROM UYE");

         while(var4.next()) {
            String var5 = var4.getString(2);
            var2.addItem(var5);
            var3.put(var5, var4.getInt(1));
         }

         var4.close();
      } catch (SQLException var10) {
      }

      JButton var11 = new JButton("Filtrele");
      var1.add(new JLabel("Üye:"));
      var1.add(var2);
      var1.add(var11);
      DefaultTableModel var12 = new DefaultTableModel(new String[]{"CezaID", "Üye", "Kitap", "Gecikme Gün", "Tutar", "Tarih"}, 0);
      JTable var6 = new JTable(var12);
      JScrollPane var7 = new JScrollPane(var6);
      JLabel var8 = new JLabel("Toplam Borç: 0 TL");
      Runnable var9 = () -> {
         var12.setRowCount(0);

         try {
            String var5 = "SELECT c.CezaID, u.Ad || ' ' || u.Soyad as Uye, k.KitapAdi, c.GecikmeGunu, c.Tutar, c.OlusturmaTarihi FROM CEZA c JOIN UYE u ON c.UyeID=u.UyeID JOIN ODUNC o ON c.OduncID=o.OduncID JOIN KITAP k ON o.KitapID=k.KitapID";
            String var6 = (String)var2.getSelectedItem();
            if (!var6.equals("Tüm Üyeler")) {
               var5 = var5 + " WHERE c.UyeID=" + String.valueOf(var3.get(var6));
            }

            ResultSet var7 = getConnection().createStatement().executeQuery(var5);

            double var8x;
            for(var8x = 0.0; var7.next(); var8x += var7.getDouble(5)) {
               var12.addRow(new Object[]{var7.getInt(1), var7.getString(2), var7.getString(3), var7.getInt(4), var7.getBigDecimal(5), var7.getDate(6)});
            }

            var7.close();
            var8.setText("Toplam Borç: " + var8x + " TL");
         } catch (SQLException var10) {
            JOptionPane.showMessageDialog(var0, var10.getMessage());
         }

      };
      var9.run();
      var11.addActionListener((var1x) -> {
         var9.run();
      });
      var0.add(var1, "North");
      var0.add(var7, "Center");
      var0.add(var8, "South");
      var0.setVisible(true);
   }

   static void showRaporlar() {
      JDialog var0 = new JDialog(mainFrame, "Raporlar", true);
      var0.setSize(800, 550);
      var0.setLocationRelativeTo(mainFrame);
      JTabbedPane var1 = new JTabbedPane();
      var1.addTab("Ödünç Raporu", createOduncRaporPanel());
      var1.addTab("Geciken Kitaplar", createGecikenPanel());
      var1.addTab("En Çok Ödünç Alınan", createEnCokPanel());
      var0.add(var1);
      var0.setVisible(true);
   }

   static JPanel createOduncRaporPanel() {
      JPanel var0 = new JPanel(new BorderLayout());
      JPanel var1 = new JPanel(new FlowLayout(0));
      JTextField var2 = new JTextField(10);
      JTextField var3 = new JTextField(10);
      JButton var4 = new JButton("Rapor Al");
      var1.add(new JLabel("Başlangıç (YYYY-MM-DD):"));
      var1.add(var2);
      var1.add(new JLabel("Bitiş:"));
      var1.add(var3);
      var1.add(var4);
      DefaultTableModel var5 = new DefaultTableModel(new String[]{"Üye", "Kitap", "Ödünç Tarihi", "Teslim Tarihi", "Durum"}, 0);
      JTable var6 = new JTable(var5);
      var4.addActionListener((var4x) -> {
         var5.setRowCount(0);

         try {
            String var5x = "SELECT u.Ad || ' ' || u.Soyad, k.KitapAdi, o.OduncTarihi, o.TeslimTarihi, CASE WHEN o.TeslimTarihi IS NULL THEN 'Aktif' ELSE 'Teslim Edildi' END FROM ODUNC o JOIN UYE u ON o.UyeID=u.UyeID JOIN KITAP k ON o.KitapID=k.KitapID WHERE o.OduncTarihi BETWEEN ? AND ?";
            PreparedStatement var6 = getConnection().prepareStatement(var5x);
            var6.setDate(1, Date.valueOf(var2.getText()));
            var6.setDate(2, Date.valueOf(var3.getText()));
            ResultSet var7 = var6.executeQuery();

            while(var7.next()) {
               var5.addRow(new Object[]{var7.getString(1), var7.getString(2), var7.getDate(3), var7.getDate(4), var7.getString(5)});
            }

            var7.close();
            var6.close();
         } catch (Exception var8) {
            JOptionPane.showMessageDialog(var0, var8.getMessage());
         }

      });
      var0.add(var1, "North");
      var0.add(new JScrollPane(var6), "Center");
      return var0;
   }

   static JPanel createGecikenPanel() {
      JPanel var0 = new JPanel(new BorderLayout());
      DefaultTableModel var1 = new DefaultTableModel(new String[]{"Üye", "Kitap", "Ödünç Tarihi", "Son Teslim", "Gecikme Gün"}, 0);
      JTable var2 = new JTable(var1);
      JButton var3 = new JButton("Yenile");
      Runnable var4 = () -> {
         var1.setRowCount(0);

         try {
            String var1x = "SELECT u.Ad || ' ' || u.Soyad, k.KitapAdi, o.OduncTarihi, o.SonTeslimTarihi, CURRENT_DATE - o.SonTeslimTarihi as Gecikme FROM ODUNC o JOIN UYE u ON o.UyeID=u.UyeID JOIN KITAP k ON o.KitapID=k.KitapID WHERE o.TeslimTarihi IS NULL AND o.SonTeslimTarihi < CURRENT_DATE";
            ResultSet var2 = getConnection().createStatement().executeQuery(var1x);

            while(var2.next()) {
               var1.addRow(new Object[]{var2.getString(1), var2.getString(2), var2.getDate(3), var2.getDate(4), var2.getInt(5)});
            }

            var2.close();
         } catch (SQLException var3) {
         }

      };
      var4.run();
      var3.addActionListener((var1x) -> {
         var4.run();
      });
      var0.add(new JScrollPane(var2), "Center");
      var0.add(var3, "South");
      return var0;
   }

   static JPanel createEnCokPanel() {
      JPanel var0 = new JPanel(new BorderLayout());
      JPanel var1 = new JPanel(new FlowLayout(0));
      JTextField var2 = new JTextField(10);
      JTextField var3 = new JTextField(10);
      JButton var4 = new JButton("Rapor Al");
      var1.add(new JLabel("Başlangıç (YYYY-MM-DD):"));
      var1.add(var2);
      var1.add(new JLabel("Bitiş:"));
      var1.add(var3);
      var1.add(var4);
      DefaultTableModel var5 = new DefaultTableModel(new String[]{"Kitap Adı", "Yazar", "Ödünç Sayısı"}, 0);
      JTable var6 = new JTable(var5);
      var4.addActionListener((var4x) -> {
         var5.setRowCount(0);

         try {
            String var5x = "SELECT k.KitapAdi, k.Yazar, COUNT(*) as Sayi FROM ODUNC o JOIN KITAP k ON o.KitapID=k.KitapID WHERE o.OduncTarihi BETWEEN ? AND ? GROUP BY k.KitapID, k.KitapAdi, k.Yazar ORDER BY Sayi DESC";
            PreparedStatement var6 = getConnection().prepareStatement(var5x);
            var6.setDate(1, Date.valueOf(var2.getText()));
            var6.setDate(2, Date.valueOf(var3.getText()));
            ResultSet var7 = var6.executeQuery();

            while(var7.next()) {
               var5.addRow(new Object[]{var7.getString(1), var7.getString(2), var7.getInt(3)});
            }

            var7.close();
            var6.close();
         } catch (Exception var8) {
            JOptionPane.showMessageDialog(var0, var8.getMessage());
         }

      });
      var0.add(var1, "North");
      var0.add(new JScrollPane(var6), "Center");
      return var0;
   }

   static void showDinamikSorgu() {
      JDialog var0 = new JDialog(mainFrame, "Dinamik Sorgu", true);
      var0.setSize(850, 550);
      var0.setLocationRelativeTo(mainFrame);
      JPanel var1 = new JPanel(new GridLayout(4, 4, 5, 5));
      var1.setBorder(BorderFactory.createTitledBorder("Filtreler"));
      JTextField var2 = new JTextField();
      JTextField var3 = new JTextField();
      JComboBox var4 = new JComboBox();
      var4.addItem("");
      JTextField var5 = new JTextField();
      JTextField var6 = new JTextField();
      JCheckBox var7 = new JCheckBox("Sadece Mevcut Kitaplar");
      HashMap var8 = new HashMap();

      try {
         ResultSet var9 = getConnection().createStatement().executeQuery("SELECT * FROM KATEGORI");

         while(var9.next()) {
            var4.addItem(var9.getString("KategoriAdi"));
            var8.put(var9.getString("KategoriAdi"), var9.getInt("KategoriID"));
         }

         var9.close();
      } catch (SQLException var16) {
      }

      var1.add(new JLabel("Kitap Adı:"));
      var1.add(var2);
      var1.add(new JLabel("Yazar:"));
      var1.add(var3);
      var1.add(new JLabel("Kategori:"));
      var1.add(var4);
      var1.add(new JLabel("Min Basım Yılı:"));
      var1.add(var5);
      var1.add(new JLabel("Max Basım Yılı:"));
      var1.add(var6);
      var1.add(var7);
      var1.add(new JLabel(""));
      JButton var17 = new JButton("Sorgula");
      JButton var10 = new JButton("Excel İndir");
      JPanel var11 = new JPanel(new FlowLayout());
      var11.add(var17);
      var11.add(var10);
      var1.add(var11);
      DefaultTableModel var12 = new DefaultTableModel(new String[]{"ID", "Kitap Adı", "Yazar", "Kategori", "Yayınevi", "Yıl", "Toplam", "Mevcut"}, 0);
      JTable var13 = new JTable(var12);
      JScrollPane var14 = new JScrollPane(var13);
      var17.addActionListener((var9x) -> {
         var12.setRowCount(0);

         try {
            StringBuilder var10 = new StringBuilder("SELECT k.KitapID, k.KitapAdi, k.Yazar, c.KategoriAdi, k.Yayinevi, k.BasimYili, k.ToplamAdet, k.MevcutAdet FROM KITAP k LEFT JOIN KATEGORI c ON k.KategoriID=c.KategoriID WHERE 1=1");
            ArrayList var11 = new ArrayList();
            if (!var2.getText().trim().isEmpty()) {
               var10.append(" AND k.KitapAdi ILIKE ?");
               var11.add("%" + var2.getText().trim() + "%");
            }

            if (!var3.getText().trim().isEmpty()) {
               var10.append(" AND k.Yazar ILIKE ?");
               var11.add("%" + var3.getText().trim() + "%");
            }

            String var12x = (String)var4.getSelectedItem();
            if (var12x != null && !var12x.isEmpty()) {
               var10.append(" AND k.KategoriID = ?");
               var11.add(var8.get(var12x));
            }

            if (!var5.getText().trim().isEmpty()) {
               var10.append(" AND k.BasimYili >= ?");
               var11.add(Integer.parseInt(var5.getText().trim()));
            }

            if (!var6.getText().trim().isEmpty()) {
               var10.append(" AND k.BasimYili <= ?");
               var11.add(Integer.parseInt(var6.getText().trim()));
            }

            if (var7.isSelected()) {
               var10.append(" AND k.MevcutAdet > 0");
            }

            PreparedStatement var13 = getConnection().prepareStatement(var10.toString());

            for(int var14 = 0; var14 < var11.size(); ++var14) {
               Object var15 = var11.get(var14);
               if (var15 instanceof String) {
                  var13.setString(var14 + 1, (String)var15);
               } else if (var15 instanceof Integer) {
                  var13.setInt(var14 + 1, (Integer)var15);
               }
            }

            ResultSet var17 = var13.executeQuery();

            while(var17.next()) {
               var12.addRow(new Object[]{var17.getInt(1), var17.getString(2), var17.getString(3), var17.getString(4), var17.getString(5), var17.getInt(6), var17.getInt(7), var17.getInt(8)});
            }

            var17.close();
            var13.close();
         } catch (Exception var16) {
            JOptionPane.showMessageDialog(var0, var16.getMessage());
         }

      });
      var10.addActionListener((var2x) -> {
         JFileChooser var3 = new JFileChooser();
         var3.setSelectedFile(new File("kitaplar.csv"));
         if (var3.showSaveDialog(var0) == 0) {
            try {
               PrintWriter var4 = new PrintWriter(new OutputStreamWriter(new FileOutputStream(var3.getSelectedFile()), "UTF-8"));

               try {
                  String var10001;
                  int var5;
                  for(var5 = 0; var5 < var12.getColumnCount(); ++var5) {
                     var10001 = var12.getColumnName(var5);
                     var4.print(var10001 + (var5 < var12.getColumnCount() - 1 ? ";" : ""));
                  }

                  var4.println();

                  for(var5 = 0; var5 < var12.getRowCount(); ++var5) {
                     for(int var6 = 0; var6 < var12.getColumnCount(); ++var6) {
                        var10001 = String.valueOf(var12.getValueAt(var5, var6));
                        var4.print(var10001 + (var6 < var12.getColumnCount() - 1 ? ";" : ""));
                     }

                     var4.println();
                  }

                  JOptionPane.showMessageDialog(var0, "Dosya kaydedildi.");
               } catch (Throwable var8) {
                  try {
                     var4.close();
                  } catch (Throwable var7) {
                     var8.addSuppressed(var7);
                  }

                  throw var8;
               }

               var4.close();
            } catch (Exception var9) {
               JOptionPane.showMessageDialog(var0, var9.getMessage());
            }
         }

      });
      JPanel var15 = new JPanel(new BorderLayout());
      var15.add(var1, "Center");
      var0.add(var15, "North");
      var0.add(var14, "Center");
      var0.setVisible(true);
   }
}
